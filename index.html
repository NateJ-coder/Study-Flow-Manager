<!doctype html>
<html lang="en" data-app="StudyFlow">
  <head>    <    <aside id="rain-lockout" role="dialog" aria-modal="true" aria-labelledby="rain-title" hidden>
      <div class="lockout-card">
        <h2 id="rain-title">It's raining!</h2>
        <p>Don't touch the electronicsâ€”you will get shocked!</p>
        <p>Use the rain toggle button to stop the rain</p>
      </div>id="rain-lockout" role="dialog" aria-modal="true" aria-labelledby="rain-title" hidden>
      <div class="lockout-card">
        <h2 id="rain-title">It's raining!</h2>
        <p>Don't touch the electronicsâ€”you will get shocked!</p>
        <p>Use the rain toggle button to stop the rain</p>
      </div>meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>StudyFlow</title>

    <!-- CSS and JS files -->
    <link rel="stylesheet" href="style.css">
    <!-- Backgrounds live under assets/images; audio under assets/audios; JSON under /data. -->
    <!-- JS will later fetch: data/studyflow_config.json -->
  </head>

  <body data-page="timer" data-theme="summer" data-daynight="day" data-timezone="Africa/Johannesburg">
    <noscript>
      <p style="padding:1rem">StudyFlow requires JavaScript to run.</p>
    </noscript>

    <!-- ===== Global Background & Effects ===== -->
    <div id="bg-root" aria-hidden="true">
      <!-- Rotating/slideshow images get injected here -->
      <div id="bg-slideshow" role="img" aria-label="Scenery background"></div>

      <!-- Falling particles / snow / leaves / rain / fireflies (canvas or SVG inserted later) -->
      <div id="particles-layer" aria-hidden="true"></div>

      <!-- Optional glass/tint overlay per theme -->
      <div id="ui-tint" aria-hidden="true"></div>
    </div>

    <!-- ===== Always-on Clock + Reminders Dropdown ===== -->
    <header id="global-topbar" aria-label="Global clock and quick actions">
      <div id="clock" aria-live="polite" aria-label="Current time">
        <time id="clock-time">00:00</time>
        <button id="clock-reminders-toggle" aria-haspopup="true" aria-controls="reminders-panel" aria-expanded="false" title="Reminders">ðŸ“…</button>
      </div>

      <!-- Reminders dropdown panel (hidden by default) -->
      <section id="reminders-panel" aria-label="Reminders" hidden>
        <header>
          <h2>Set Reminder</h2>
        </header>
        <form id="reminder-form" autocomplete="off">
          <label>
            Title
            <input id="reminder-title" name="title" type="text" placeholder="e.g., Stand up & stretch" />
          </label>
          <label>
            Date &amp; Time
            <input id="reminder-datetime" name="when" type="datetime-local" />
          </label>
          <button id="reminder-save" type="submit">Save</button>
        </form>
        <div id="reminder-list" aria-live="polite"></div>
      </section>
    </header>

    <!-- ===== Side Navigation (contextual icons; auto-hide via CSS/JS later) ===== -->
    <nav id="sidebar" aria-label="Page navigation">
      <button class="nav-item" data-target="calendar" aria-label="Open Calendar" title="Calendar" id="nav-calendar"></button>
      <button class="nav-item" data-target="settings" aria-label="Open Settings" title="Settings" id="nav-settings"></button>
      <!-- When on non-timer pages, replace items so only the other two show. Controlled by JS later. -->
    </nav>

    <!-- ===== Rain Lockout Overlay (shown during rain unless dev override) ===== -->
    <aside id="rain-lockout" role="dialog" aria-modal="true" aria-labelledby="rain-title" hidden>
      <div class="lockout-card">
        <h2 id="rain-title">Itâ€™s raining!</h2>
        <p>Donâ€™t touch the electronicsâ€”you will get shocked!</p>
        <p id="rain-countdown" aria-live="polite">45:00</p>
      </div>
      <!-- Shock effect & cursor aura will be added via CSS/JS during lockout -->
    </aside>

    <!-- ===== Main App Views ===== -->
    <main id="app" aria-live="polite">

      <!-- === TIMER PAGE === -->
      <section id="page-timer" role="region" aria-label="Pomodoro Timer" data-view="timer">
        <header class="page-title">
          <h1>StudyFlow</h1>
        </header>

        <!-- Decorative frame around timer (SVG/CSS later) -->
        <div id="timer-frame">
          <div id="session-indicator" aria-live="polite">
            <span id="session-current">1</span> of <span id="session-total">4</span>
          </div>

          <!-- Main countdown -->
          <div id="countdown" aria-live="assertive">
            <span id="time-mm">45</span>:<span id="time-ss">00</span>
          </div>

          <!-- Hourglass container (SVG/Canvas injected later) -->
          <div id="hourglass" aria-label="Hourglass animation" aria-hidden="false"></div>

          <!-- Timer controls -->
          <div id="timer-controls" role="group" aria-label="Timer controls">
            <button id="btn-start" type="button">Start</button>
            <button id="btn-pause" type="button" disabled>Pause</button>
            <button id="btn-reset" type="button">Reset</button>
            <button id="btn-mode" type="button" data-mode="work" aria-label="Switch mode">Work</button>
          </div>
        </div>
      </section>

      <!-- === CALENDAR PAGE === -->
      <section id="page-calendar" role="region" aria-label="Calendar" data-view="calendar" hidden>
        <header class="page-title">
          <h1>Calendar</h1>
        </header>

        <!-- Month header -->
        <div id="calendar-header" role="group" aria-label="Month navigation">
          <button id="cal-prev" aria-label="Previous month">&larr;</button>
          <h2 id="cal-title" aria-live="polite">Month YYYY</h2>
          <button id="cal-next" aria-label="Next month">&rarr;</button>
        </div>

        <!-- Weekday row -->
        <div id="calendar-weekdays" aria-hidden="true">
          <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
        </div>

        <!-- Grid -->
        <div id="calendar-grid" role="grid" aria-label="Month grid">
          <!-- JS will generate day cells. Right-click = draw X; left-click = task popup -->
        </div>

        <!-- Task popup for a selected day -->
        <dialog id="calendar-task-dialog" aria-label="Tasks for selected day">
          <form method="dialog" id="task-form" autocomplete="off">
            <header>
              <h3 id="task-date-label">Tasks â€” 2025-01-01</h3>
            </header>

            <div id="task-list" role="list"></div>

            <div class="task-new">
              <label>
                New task
                <input id="task-input" name="task" type="text" placeholder="Describe your taskâ€¦" />
              </label>
              <button id="task-add" type="button">Add</button>
            </div>

            <menu>
              <button id="task-move-incomplete" value="move">Move incomplete to next day</button>
              <button id="task-close" value="cancel">Close</button>
            </menu>

            <!-- Encouragement message area -->
            <p id="encouragement" aria-live="polite" hidden></p>
          </form>
        </dialog>
      </section>

      <!-- === SETTINGS PAGE === -->
      <section id="page-settings" role="region" aria-label="Settings" data-view="settings" hidden>
        <header class="page-title">
          <h1>Settings</h1>
        </header>

        <form id="settings-form" autocomplete="off">
          <!-- Calendar -->
          <fieldset id="settings-calendar">
            <legend>Calendar</legend>
            <label>
              Cross color
              <input id="cross-color" name="calendar_cross_color" type="color" value="#ff4d4d" />
            </label>
          </fieldset>

          <!-- Background & Frames -->
          <fieldset id="settings-appearance">
            <legend>Appearance</legend>
            <label>
              Background brightness
              <input id="bg-brightness" name="background_brightness" type="range" min="0" max="100" value="100" />
            </label>
            <label>
              Frame opacity
              <input id="frame-opacity" name="frame_opacity" type="range" min="0" max="100" value="100" />
            </label>
          </fieldset>

          <!-- Season & Time -->
          <fieldset id="settings-theme">
            <legend>Theme &amp; Time</legend>

            <label>
              Season
              <select id="season" name="season">
                <option value="summer">Summer</option>
                <option value="autumn">Autumn</option>
                <option value="winter">Winter</option>
              </select>
            </label>

            <label>
              Timezone
              <select id="timezone" name="timezone">
                <!-- Options injected from JS, default Africa/Johannesburg -->
              </select>
            </label>

            <label>
              Background slideshow
              <input id="slideshow-enabled" name="slideshow_enabled" type="checkbox" checked />
            </label>

            <label>
              Slideshow interval (seconds)
              <input id="slideshow-interval" name="slideshow_interval_seconds" type="number" min="5" step="5" value="30" />
            </label>
          </fieldset>

          <!-- Pomodoro -->
          <fieldset id="settings-pomodoro">
            <legend>Pomodoro</legend>

            <label>
              Sessions
              <input id="pomodoro-sessions" name="pomodoro_sessions" type="number" min="1" value="4" />
            </label>

            <label>
              Work (minutes)
              <input id="work-minutes" name="work_minutes" type="number" min="1" value="25" />
            </label>

            <label>
              Short break (minutes)
              <input id="short-break-minutes" name="short_break_minutes" type="number" min="1" value="5" />
            </label>

            <label>
              Long break (minutes)
              <input id="long-break-minutes" name="long_break_minutes" type="number" min="1" value="20" />
            </label>

            <label>
              Short breaks before long break
              <input id="short-breaks-before-long" name="short_breaks_before_long" type="number" min="1" value="3" />
            </label>
          </fieldset>

          <!-- Weather & Rain -->
          <fieldset id="settings-weather">
            <legend>Weather &amp; Rain</legend>

            <button id="rain-toggle" type="button">Start Rain</button>
          </fieldset>

          <menu>
            <button id="settings-save" type="submit">Save</button>
            <button id="settings-cancel" type="reset">Reset</button>
          </menu>
        </form>
      </section>
    </main>

    <!-- ===== Audio (preloaded, controlled later by JS) ===== -->
    <audio id="audio-rain" src="assets/audios/rainfall.mp3" preload="auto" loop></audio>
    <audio id="audio-splash" src="assets/audios/splash.mp3" preload="auto"></audio>
    <audio id="audio-drawing" src="assets/audios/drawing.mp3" preload="auto"></audio>

    <!-- ===== Data sources (fetched later by JS) ===== -->
    <!-- studyflow_config.json will be fetched from: /data/studyflow_config.json -->

    <!-- Firebase init will be added later in JS using your provided config -->
    <script src="core.js"></script>
  </body>
</html>
