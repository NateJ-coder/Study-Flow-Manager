<!doctype html>
<html lang="en" data-app="StudyFlow">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self';
      style-src 'self' 'unsafe-inline';
      img-src 'self' data: https:;
      font-src 'self' data:;
      media-src 'self' https:;
      connect-src 'self';
      object-src 'none';
      base-uri 'self';
      frame-ancestors 'none';
    ">
    <title>StudyFlow ‚Äî Settings</title>

  <!-- CSS and JS files -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/wooden-buttons.css">
  <link rel="stylesheet" href="assets/css/calendar-page.css">
  <!-- Backgrounds live under assets/images; audio under assets/audio; JSON under /data. -->
    <!-- JS will later fetch: assets/js/studyflow_config.json -->
  </head>

  <body data-page="settings" data-theme="summer" data-daynight="day" data-timezone="Africa/Johannesburg">
    <noscript>
      <p style="padding:1rem">StudyFlow requires JavaScript to run.</p>
    </noscript>

    <!-- ===== Global Background & Effects ===== -->
    <div id="bg-root" aria-hidden="true">
      <div id="bg-slideshow" role="img" aria-label="Scenery background"></div>
      <div id="particles-layer" aria-hidden="true"></div>
      <div id="ui-tint" aria-hidden="true"></div>
    </div>

    <!-- ===== Background Navigation Arrows ===== -->
    <button class="bg-nav prev" aria-label="Previous background">‚Äπ</button>
    <button class="bg-nav next" aria-label="Next background">‚Ä∫</button>

    <!-- ===== StudyFlow Title ===== -->
    <div id="app-title" class="animate-text">
      <span>S</span><span>t</span><span>u</span><span>d</span><span>y</span><span>F</span><span>l</span><span>o</span><span>w</span>
    </div>

    <!-- ===== Always-on Clock + Reminders Dropdown ===== -->
    <header id="global-topbar" aria-label="Global clock and quick actions">
      <div id="clock" aria-live="polite" aria-label="Current time">
        <time id="clock-time">00:00</time>
      </div>
    </header>

    <!-- ===== Side Navigation (contextual icons; auto-hide via CSS/JS later) ===== -->
    <nav id="sidebar" aria-label="Page navigation">
      <a class="nav-item" href="index.html" aria-label="Open Timer" title="Timer" id="nav-timer">
        <img class="nav-icon-img" src="assets/images/clock-icon.svg" alt="Timer" aria-hidden="true">
      </a>
      <a class="nav-item" href="calendar.html" aria-label="Open Calendar" title="Calendar" id="nav-calendar">
        <img class="nav-icon-img" src="assets/images/calendar-icon.svg" alt="Calendar" aria-hidden="true">
      </a>
    </nav>

    <!-- ===== Rain Lockout Overlay (shown during rain) ===== -->
    <aside id="rain-lockout" role="dialog" aria-modal="true" aria-labelledby="rain-title" hidden>
      <div class="lockout-card">
        <h2 id="rain-title">It's raining!</h2>
        <p>Don't touch the electronics‚Äîyou will get shocked!</p>
        <p class="lockout-instruction">Use the Rain toggle in Settings to stop the rain.</p>
      </div>
    </aside>

    <!-- ===== Rain Lockout Overlay (shown during rain) ===== -->
    <aside id="rain-lockout" role="dialog" aria-modal="true" aria-labelledby="rain-title" hidden>
      <div class="lockout-card">
        <h2 id="rain-title">It‚Äôs raining!</h2>
        <p>Don‚Äôt touch the electronics‚Äîyou will get shocked!</p>
        <p class="lockout-instruction">Use the Rain toggle in Settings to stop the rain.</p>
      </div>
    </aside>

    <!-- ===== SETTINGS PAGE ===== -->
    <main id="app" aria-live="polite">
      <section id="page-settings" role="region" aria-label="Settings" data-view="settings">
        <div class="settings-container">
          <header class="page-title">
            <h1>‚öôÔ∏è Settings</h1>
            <p class="page-subtitle">Customize your StudyFlow experience</p>
          </header>

          <form id="settings-form" class="settings-form" autocomplete="off">
            <!-- Calendar Settings -->
            <fieldset id="settings-calendar" class="settings-section">
              <legend>üìÖ Calendar</legend>
              <div class="setting-group">
                <label class="setting-label">
                  <span class="label-text">Task completion color</span>
                  <input id="cross-color" name="calendar_cross_color" type="color" value="#ff4d4d" class="wooden-input color-input" />
                </label>
              </div>
            </fieldset>

            <!-- Appearance Settings -->
            <fieldset id="settings-appearance" class="settings-section">
              <legend>üé® Appearance</legend>
              <div class="setting-group">
                <label class="setting-label">
                  <span class="label-text">Background brightness</span>
                  <div class="range-container">
                    <input id="bg-brightness" name="background_brightness" type="range" min="0" max="100" value="100" class="wooden-slider" />
                    <span class="range-value">100%</span>
                  </div>
                </label>
                
                <label class="setting-label">
                  <span class="label-text">Frame opacity</span>
                  <div class="range-container">
                    <input id="frame-opacity" name="frame_opacity" type="range" min="0" max="100" value="100" class="wooden-slider" />
                    <span class="range-value">100%</span>
                  </div>
                </label>
              </div>
            </fieldset>

            <!-- Theme & Time Settings -->
            <fieldset id="settings-theme" class="settings-section">
              <legend>üåÖ Theme & Time</legend>
              <div class="setting-group">
                <label class="setting-label">
                  <span class="label-text">Season</span>
                  <select id="season" name="season" class="wooden-select">
                    <option value="summer">‚òÄÔ∏è Summer</option>
                    <option value="autumn">üçÇ Autumn</option>
                    <option value="winter">‚ùÑÔ∏è Winter</option>
                  </select>
                </label>

                <label class="setting-label">
                  <span class="label-text">Timezone</span>
                  <select id="timezone" name="timezone" class="wooden-select">
                    <option value="Africa/Johannesburg">üåç Africa/Johannesburg</option>
                  </select>
                </label>

                <div class="checkbox-group">
                  <label class="setting-checkbox">
                    <input id="slideshow-enabled" name="slideshow_enabled" type="checkbox" checked class="wooden-checkbox" />
                    <span class="checkbox-label">üñºÔ∏è Background slideshow</span>
                  </label>
                </div>

                <label class="setting-label">
                  <span class="label-text">Slideshow interval (seconds)</span>
                  <input id="slideshow-interval" name="slideshow_interval_seconds" type="number" min="5" step="5" value="30" class="wooden-input number-input" />
                </label>
              </div>
            </fieldset>

            <!-- Pomodoro Settings -->
            <fieldset id="settings-pomodoro" class="settings-section">
              <legend>üçÖ Pomodoro Timer</legend>
              <div class="setting-group">
                <label class="setting-label">
                  <span class="label-text">Sessions per cycle</span>
                  <input id="pomodoro-sessions" name="pomodoro_sessions" type="number" min="1" max="10" value="4" class="wooden-input number-input" />
                </label>

                <label class="setting-label">
                  <span class="label-text">Work duration (minutes)</span>
                  <input id="work-minutes" name="work_minutes" type="number" min="1" max="120" value="25" class="wooden-input number-input" />
                </label>

                <label class="setting-label">
                  <span class="label-text">Short break (minutes)</span>
                  <input id="short-break-minutes" name="short_break_minutes" type="number" min="1" max="30" value="5" class="wooden-input number-input" />
                </label>

                <label class="setting-label">
                  <span class="label-text">Long break (minutes)</span>
                  <input id="long-break-minutes" name="long_break_minutes" type="number" min="1" max="60" value="20" class="wooden-input number-input" />
                </label>

                <label class="setting-label">
                  <span class="label-text">Short breaks before long break</span>
                  <input id="short-breaks-before-long" name="short_breaks_before_long" type="number" min="1" max="10" value="3" class="wooden-input number-input" />
                </label>
              </div>
            </fieldset>

            <!-- Weather & Rain Settings -->
            <fieldset id="settings-weather" class="settings-section">
              <legend>üåßÔ∏è Weather & Rain</legend>
              <div class="setting-group">
                <div class="rain-controls">
                  <button id="rain-toggle" type="button" class="wooden-btn btn-rain-toggle">
                    <span class="btn-icon">‚òî</span>
                    Start Rain
                  </button>
                  <p class="rain-description">Enable atmospheric rain effects with ambient sounds</p>
                </div>
              </div>
            </fieldset>

            <!-- Action Buttons -->
            <div class="settings-actions">
              <button id="settings-save" type="submit" class="wooden-btn btn-save-settings">
                <span class="btn-icon">üíæ</span>
                Save Settings
              </button>
              <button id="settings-cancel" type="reset" class="wooden-btn btn-reset-settings">
                <span class="btn-icon">‚Ü∫</span>
                Reset to Defaults
              </button>
            </div>
          </form>
        </div>
      </section>
    </main>

    <!-- ===== Audio (preloaded, controlled later by JS) ===== -->
  <audio id="audio-rain" src="assets/audio/rainfall.mp3" preload="auto" loop></audio>
  <audio id="audio-splash" src="assets/audio/splash.mp3" preload="auto"></audio>
  <audio id="audio-drawing" src="assets/audio/drawing.mp3" preload="auto"></audio>
  <audio id="audio-click" src="assets/audio/click.mp3" preload="auto"></audio>

    <script src="assets/js/core.js"></script>
    <script type="module" src="assets/js/core-modern.js"></script>
  </body>
</html>
